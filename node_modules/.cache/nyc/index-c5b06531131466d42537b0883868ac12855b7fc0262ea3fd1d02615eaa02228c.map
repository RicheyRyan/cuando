{"version":3,"file":"/home/richey/Projects/quando/src/index.ts","sources":["/home/richey/Projects/quando/src/index.ts"],"names":[],"mappings":";;;AAEA;IAIE,oBACE,gBAAyB,EACzB,SAAkB,EAClB,MAAsB;QAEtB,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,gBAAgB,CAAC;QAClC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,MAAM,CAAC,CAAC;IAChD,CAAC;IACD,wBAAG,GAAH,UAAI,YAA6B;QAC/B,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,gBAAgB,EAAE;YAC5C,OAAO,IAAI,CAAC,MAAM,CAAC;SACpB;QACD,OAAO,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;IAC1C,CAAC;IACD,iCAAY,GAAZ,UAAa,SAAkB,EAAE,MAAsB;QACrD,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IAC3C,CAAC;IACD,kCAAa,GAAb,UAAc,MAAsB;QAClC,IAAI,MAAM,YAAY,QAAQ,EAAE;YAC9B,OAAO,MAAM,EAAE,CAAC;SACjB;aAAM;YACL,OAAO,MAAM,CAAC;SACf;IACH,CAAC;IACH,iBAAC;AAAD,CAAC,AA9BD,IA8BC;AAED;IAGE,uBAAY,UAAyB;QACnC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IACD,gCAAQ,GAAR,UAAS,SAAkB,EAAE,MAAsB;QACjD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAChD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,2BAAG,GAAH,UAAI,YAA6B;QAC/B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAC3C,CAAC;IACH,oBAAC;AAAD,CAAC,AAbD,IAaC;AAED,SAAgB,IAAI,CAAI,SAAkB,EAAE,MAAuB;IACjE,OAAO,IAAI,aAAa,CAAI,IAAI,UAAU,CAAI,IAAI,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC;AAC1E,CAAC;AAFD,oBAEC;AAED;IAGE,yBAAY,UAAyB;QACnC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IACD,6BAAG,GAAH,UAAI,YAA6B;QAC/B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAC3C,CAAC;IACH,sBAAC;AAAD,CAAC,AATD,IASC;AAED,SAAgB,MAAM,CAAI,SAAkB,EAAE,MAAsB;IAClE,OAAO,IAAI,eAAe,CAAI,IAAI,UAAU,CAAI,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC;AAC7E,CAAC;AAFD,wBAEC","sourcesContent":["type QuandoResult<R> = R | undefined;\ntype QuandoParam<R> = R | (() => R) | undefined;\nclass Controller<R> {\n  defaultCondition: Boolean;\n  condition: Boolean;\n  result: QuandoResult<R>;\n  constructor(\n    defaultCondition: Boolean,\n    condition: Boolean,\n    result: QuandoParam<R>\n  ) {\n    this.defaultCondition = defaultCondition;\n    this.condition = defaultCondition;\n    this.updateResult(Boolean(condition), result);\n  }\n  end(defaultValue?: QuandoParam<R>) {\n    if (this.condition === this.defaultCondition) {\n      return this.result;\n    }\n    return this.extractResult(defaultValue);\n  }\n  updateResult(condition: Boolean, result: QuandoParam<R>) {\n    this.condition = condition;\n    this.result = this.extractResult(result);\n  }\n  extractResult(result: QuandoParam<R>) {\n    if (result instanceof Function) {\n      return result();\n    } else {\n      return result;\n    }\n  }\n}\n\nclass WhenCondition<R> {\n  private controller: Controller<R>;\n\n  constructor(controller: Controller<R>) {\n    this.controller = controller;\n  }\n  elseWhen(condition: Boolean, result: QuandoParam<R>) {\n    this.controller.updateResult(condition, result);\n    return this;\n  }\n  end(defaultValue?: QuandoParam<R>) {\n    return this.controller.end(defaultValue);\n  }\n}\n\nexport function When<R>(condition: Boolean, result?: QuandoParam<R>) {\n  return new WhenCondition<R>(new Controller<R>(true, condition, result));\n}\n\nclass UnlessCondition<R> {\n  private controller: Controller<R>;\n\n  constructor(controller: Controller<R>) {\n    this.controller = controller;\n  }\n  end(defaultValue?: QuandoParam<R>) {\n    return this.controller.end(defaultValue);\n  }\n}\n\nexport function Unless<R>(condition: Boolean, result: QuandoParam<R>) {\n  return new UnlessCondition<R>(new Controller<R>(false, condition, result));\n}\n"]}